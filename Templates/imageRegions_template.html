
<div class="row nestedPage">
    <div class="col-md-5">

        <div class="row pageHeader">
            <div class="col-md-12">
                <span class="pageHeaderIcon"><img src="./Content/img/icon_image.png" /></span> {{title}}
            </div>
        </div>

        <div class="panel panel-default">
            <div class="panel-body">
               
                <form id="ImageRegionsForm" method="post" role="form">

                    <div class="panel panel-default">
                        <div class="panel-heading userPanelHeader">
                            <span>General Settings</span>
                            {{#if editAttribute}}
                            <span class="btnEdit"><a id="EditImageRegions" class="btn btn-default" href="#EditImageRegions/{{id}}">Edit</a></span>
                            {{else}}
                            <span class="btnEdit"><a class="btn btn-default" href="#ListImageRegions">Cancel</a></span>
                            {{/if}}
                        </div>
                        <div class="panel-body">
                            <div class="form-horizontal">
                                <div class="form-group">
                                    <label for="profile" class="col-sm-4 control-label">Name</label>
                                    <div class="col-sm-8">
                                        <input type="text" {{editAttribute}} errorName="Name" class="form-control" name="name" value='{{name}}'>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="profile" class="col-sm-4 control-label">Description</label>
                                    <div class="col-sm-8">
                                        <input type="text" {{editAttribute}} errorName="Description" class="form-control" name="description" value='{{description}}'>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <br />
                    <br />

                    <div class="panel panel-default">
                        <div class="panel-heading userPanelHeader">
                            <span>Image Details</span>
                        </div>
                        <div class="panel-body">
                            <div class="form-horizontal">

                                <div class="form-group">
                                    <label for="profile" class="col-sm-4 control-label">Image</label> 
                                    <div class="col-sm-8">
                                        <div class="input-group">
                                             <canvas style="border:1px solid #000000;" id="myCanvas" width="100" height="100"></canvas>
											 <input type="hidden" name="imageAsBase64String" value='{{imageAsBase64String}}'>
											<span class="input-group-btn">
                                                <span class="btn btn-primary btn-file">
                                                    Browse&hellip; <input type="file" class="form-control" id="imageAsBase64String" errorName="Base64 Image String">
                                                </span>
                                            </span>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="enabled" class="col-sm-4 control-label">Preserve Image Size</label>
                                    <div class="col-sm-1">
                                        {{#if editAttribute}}
                                        {{#if stretchImageToFitRegion}}
                                        <input type="checkbox" {{editAttribute}} class="form-control" errorName="Stretch to Fit Region" id="stretchImageToFitRegion" name="stretchImageToFitRegion" disabled checked>
                                        {{else}}
                                        <input type="checkbox" {{editAttribute}} class="form-control" errorName="Stretch to Fit Region" id="stretchImageToFitRegion" name="stretchImageToFitRegion" disabled>
                                        {{/if}}
                                        {{else}}
                                        {{#if stretchImageToFitRegion}}
                                        <input type="hidden" name="stretchImageToFitRegion" id="stretchImageToFitRegion" value="True" />
                                        <input type="checkbox" {{editAttribute}} class="form-control" errorName="Stretch to Fit Region Mock" id="stretchImageToFitRegionMock" name="stretchImageToFitRegionMock" checked>
                                        {{else}}
                                        <input type="hidden" name="stretchImageToFitRegion" id="stretchImageToFitRegion" value="False" />
                                        <input type="checkbox" {{editAttribute}} class="form-control" errorName="Stretch to Fit Region Mock" id="stretchImageToFitRegionMock" name="stretchImageToFitRegionMock">
                                        {{/if}}
                                        {{/if}}
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="col-sm-4 control-label">Opacity</label>
                                    <div class="col-sm-6">
                                        <div class="col-md-12 opacityHolder">
                                            <div class="col-md-9 opacitySlider" id="slider-range-max"></div>&nbsp; &nbsp;<div class="col-md-2 opacityDigit" id="opacityValue"> &nbsp; &nbsp;R</div>
                                            <input type="hidden" errorName="Opacity" name="opacity" id="opacity" value="{{opacity}}">
                                        </div>


                                        {{#if detailsAction}}
                                            <script>

                                                $("#slider-range-max").slider({
                                                    range: "max",
                                                    step: 0.1,
                                                    min: 0,
                                                    max: 1,
                                                    value: {{opacity}},
                                                    slide: function (event, ui) {
                                                        $("#opacityValue").text(ui.value);
                                                        $("#opacity").val(ui.value);
                                                    }
                                                });

                                                $("#opacityValue").text($("#slider-range-max").slider("value"));
                                                $("#opacity").val($("#slider-range-max").slider("value"));
                                                $( "#slider-range-max" ).slider( "option", "disabled", true );
                                            </script>
                                        {{/if}}

                                        {{#if editAction}}
                                        <script>

                                            $("#slider-range-max").slider({
                                                range: "max",
                                                step: 0.1,
                                                min: 0,
                                                max: 1,
                                                value: {{opacity}},
                                                slide: function (event, ui) {
                                                    $("#opacityValue").text(ui.value);
                                                    $("#opacity").val(ui.value);
                                                }
                                            });

                                            $("#opacityValue").text($("#slider-range-max").slider("value"));
                                            $("#opacity").val($("#slider-range-max").slider("value"));
                                        </script>
                                        {{/if}}

                                        {{#if createAction}}
                                        <script>

                                            $("#slider-range-max").slider({
                                                range: "max",
                                                step: 0.1,
                                                min: 0,
                                                max: 1,
                                                value: 1,
                                                slide: function (event, ui) {
                                                    $("#opacityValue").text(ui.value);
                                                    $("#opacity").val(ui.value);
                                                }
                                            });

                                            $("#opacityValue").text($("#slider-range-max").slider("value"));
                                            $("#opacity").val($("#slider-range-max").slider("value"));
                                        </script>
                                        {{/if}}
                        
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>

                    <br />
                    <br />

                    <div class="panel panel-default">
                        <div class="panel-heading userPanelHeader">
                            <span>Positioning and Layout</span>
                        </div>
                        <div class="panel-body">
                            <div class="form-horizontal">
                                <div class="col-md-12">
                                    <label>Layout</label>
                                </div>
                                <div class="form-group col-md-12">
                                    <label class="col-md-3 col-md-offset-1 control-label subLabel">Print On</label> 
                                    <div class="col-md-4">
                                        <select class="form-control" errorName="Duplex Mode" name="duplexMode" id="duplexMode">
                                            <option value="0">Front Only</option>
                                            <option value="1">Front & Back</option>
                                            <option value="2">Back Only</option>
                                        </select>

                                        {{#if detailsAction}}
                                            <script>
                                                $('#duplexMode').attr('disabled', true);
                                            </script>
                                        {{/if}}


                                    </div>
                                </div>
                                <div class="form-group col-md-12">
                                    <label class="col-md-3 col-md-offset-1 control-label subLabel">Rotaion Angle</label>
                                    <div class="col-sm-6">
                                        <div class="col-md-12 opacityHolder">
                                            <div {{editAttribute}} class="col-md-9 rotationSlider" id="slider-rotation"></div>&nbsp; &nbsp;<div class="col-md-2 rotationDigit" id="rotationValue"> &nbsp; &nbsp;R</div>
                                            <input type="hidden" name="rotation" id="rotation" value="{{rotation}}">
                                        </div>

                                        {{#if editAction}}
                                        <script>
                                            $("#slider-rotation").slider({
                                                range: "max",
                                                step: 1,
                                                min: 0,
                                                max: 360,
                                                value: {{rotation}},
                                                slide: function (event, ui) {
                                                    $("#rotationValue").text(ui.value);
                                                    $("#rotation").val(ui.value);
                                                }

                                            });

                                            $("#rotationValue").text($("#slider-rotation").slider("value"));
                                            $("#rotation").val($("#slider-rotation").slider("value"));
                                        </script>
                                        {{/if}}

                                        {{#if createAction}}
                                        <script>
                                            $("#slider-rotation").slider({
                                                range: "max",
                                                step: 1,
                                                min: 0,
                                                max: 360,
                                                value: 0,
                                                slide: function (event, ui) {
                                                    $("#rotationValue").text(ui.value);
                                                    $("#rotation").val(ui.value);
                                                }

                                            });

                                            $("#rotationValue").text($("#slider-rotation").slider("value"));
                                            $("#rotation").val($("#slider-rotation").slider("value"));
                                        </script>
                                        {{/if}}

                                        {{#if detailsAction}}
                                        <script>
                                            $("#slider-rotation").slider({
                                                range: "max",
                                                step: 1,
                                                min: 0,
                                                max: 360,
                                                value: {{rotation}},
                                                slide: function (event, ui) {
                                                    $("#rotationValue").text(ui.value);
                                                    $("#rotation").val(ui.value);
                                                }

                                            });

                                            $("#rotationValue").text($("#slider-rotation").slider("value"));
                                            $("#rotation").val($("#slider-rotation").slider("value"));
                                            $( "#slider-rotation" ).slider( "option", "disabled", true );
                                        </script>
                                        {{/if}}


                                    </div>
                                </div>
                                <div class="col-md-12 positioningContainer">
                                    <label>Positioning</label>
                                </div>
                                <div class="col-md-9">
                                    <div class="form-group col-md-12 form-inline coordContainer">
                                        <label class="col-md-3 col-md-offset-1 control-label coordSubLabel">Upper Left</label>
                                        <div class="col-md-8">
                                            <input type="text" {{editAttribute}} errorName="Top Left X" class="coordBox form-control" name="topLeft.X" value='{{topLeft.x}}'>
                                            <label class=" coordLabel"> X </label>
                                            <input type="text" {{editAttribute}} errorName="Top Left Y" class="coordBox form-control" name="topLeft.Y" value='{{topLeft.y}}'>
                                            <label class=" coordLabel"> Y </label>
                                        </div>
                                    </div>
                                    <div class="form-group col-md-12">
                                        <label class="col-md-3 col-md-offset-1 control-label coordSubLabel">Lower Right</label>
                                        <div class="col-md-8  form-inline">
                                            <input type="text" {{editAttribute}} errorName="Bottom Right X" class="coordBox form-control" name="bottomRight.X" value='{{bottomRight.x}}'>
                                            <label class=" coordLabel"> X </label>
                                            <input type="text" {{editAttribute}} errorName="Bottom Right Y" class="coordBox form-control" name="bottomRight.Y" value='{{bottomRight.y}}'>
                                            <label class=" coordLabel"> Y </label>
                                        </div>
                                    </div>

                                    <div class="col-md-12 coordFooterLabelContainer">
                                        <label class="coordFooterLabel" id="units">(Coordinates in {{units}})</label>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <img src="./Content/img/icon_region_big.png" />
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="errorPanel"></div>
                    <div><button type="button" id="ImageRegionsSubmit" class="btn btnKermit btnRight">{{buttonText}}</button></div>

                </form>

            </div>
        </div>
    </div>

            <div class="col-md-3 verticalLine">
                <span class="glyphicon glyphicon glyphicon-question-sign pageHelpIcon"></span> <span class="helpTextHeader">Print ImageRegions</span><br />
                <span class="helpText">
                    Lorem ipsum dolor sit amet, consectetuer
                    adipiscing elit, sed diam nonummy nibh
                    euismod tincidunt ut laoreet dolore magna
                    aliquam erat volutpat. Ut wisi enim ad
                    minim veniam, quis nostrud exerci tation
                    ullamcorper suscipit lobortis nisl ut aliquip
                    ex ea commodo consequat.
                    Duis autem vel eum iriure dolor in
                    hendrerit in vulputate velit ese molestie
                    consequat, vel illum dolore eu feugiat nulla


                </span>
            </div>
        </div>

        <script type="text/javascript">
         
                $('.btn-file :file').on('fileselect', function (event, numFiles, label) {

                    var input = $(this).parents('.input-group').find(':text'),
                        log = numFiles > 1 ? numFiles + ' files selected' : label;

                    if (input.length) {
                        input.val(log);
                    } else {
                        if (log) alert(log);
                    }

                });
            
            $(document).on('change', '.btn-file :file', function () {
                var input = $(this),
                    numFiles = input.get(0).files ? input.get(0).files.length : 1,
                    label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
                input.trigger('fileselect', [numFiles, label]);
            });

            $("#stretchImageToFitRegionMock").click(function () {
                var currentEnabled = $("#stretchImageToFitRegion").val();
                if (currentEnabled == "True") {
                    $("#stretchImageToFitRegion").val("False");
                }
                else {
                    $("#stretchImageToFitRegion").val("True");
                }
            });

        </script>
